(this.webpackJsonplora=this.webpackJsonplora||[]).push([[0],{362:function(e,t,a){},363:function(e,t,a){},515:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(268),o=a.n(s),r=(a(362),a(28)),c=a(29),l=a(34),d=a(35),h=(a(363),a(32)),u=a(4),j=a(42),b=a(9),p=a(311),g=a(613),O=a(602),m=a(610),x=a(620),f=a(621),v=a(622),y=a(618),S=a(526),C=a(623),w=a(619),k=(a(617),a(304)),D=a.n(k),T=a(305),R=a.n(T),P=a(614),_=a(615),z=a(616),E=a(624),N=a(277),F=a.n(N),W=a(183),L=a(1);function M(){var e=Object(W.b)(),t=e.keycloak;e.initialized;return Object(L.jsxs)(n.Fragment,{children:[Object(L.jsx)(E.a,{component:"div",inset:!0,children:"Usuario"}),Object(L.jsxs)(P.a,{children:[Object(L.jsx)(_.a,{children:Object(L.jsx)(F.a,{})}),Object(L.jsx)(z.a,{primary:"Cerrar Sesi\xf3n",onClick:function(){t.logout()}})]})]})}a(11),a(47);var H=a(587),J=a(588),I=a(293),A=a(294),K=(a(73),a(313));var G=a(310),U={sc:null};U.init=function(){var e=Object(G.a)();e.on("connect",(function(e){console.log("connected")})),U.sc=e};var V=U;a(625),a(629);var q=a(628);a(626),a(627);var B=a(306),X=a.n(B),Z="Sensores",Q=1,Y=2,$={_id:null,name:"",id:"",meta:"",topic:"",latitud_value:"",longitud_value:"",category:""},ee=a(93),te=a(6),ae=a(320),ne=a(186),ie=a(301),se=a.n(ie),oe=a(630),re=a(612),ce=a(300),le=a.n(ce),de=a(220),he=a.n(de),ue=a(219),je=a.n(ue),be=a(611),pe=a(606),ge=a(592),Oe=a(633),me=a(632),xe=a(596),fe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){return Object(L.jsxs)(ge.a,{open:this.props.open,onClose:this.props.handleClose,children:[Object(L.jsx)(xe.a,{children:this.props.title}),Object(L.jsxs)(me.a,{children:[Object(L.jsx)(pe.a,{autoFocus:!0,margin:"dense",id:"name",label:"Nombre Sensor",fullWidth:!0,required:!0,variant:"standard",onChange:this.props.handleChange,value:this.props.sensor.name}),Object(L.jsx)(pe.a,{margin:"dense",id:"id",label:"Id del Sensor",fullWidth:!0,required:!0,variant:"standard",onChange:this.props.handleChange,value:this.props.sensor.id}),Object(L.jsx)(pe.a,{autoFocus:!0,margin:"dense",fullWidth:!0,variant:"standard",id:"meta",label:"Meta Data",multiline:!0,rows:8,onChange:this.props.handleChange,value:this.props.sensor.meta}),Object(L.jsx)(pe.a,{autoFocus:!0,margin:"dense",id:"topic",label:"T\xf3pico",fullWidth:!0,required:!0,variant:"standard",onChange:this.props.handleChange,value:this.props.sensor.topic}),Object(L.jsx)(pe.a,{autoFocus:!0,margin:"dense",id:"category",label:"Categor\xeda",fullWidth:!0,required:!0,variant:"standard",value:this.props.sensor.category,onChange:this.props.handleChange}),Object(L.jsx)(pe.a,{autoFocus:!0,margin:"dense",id:"latitud_value",label:"Latitud",fullWidth:!0,variant:"standard",value:this.props.sensor.latitud_value,onChange:this.props.handleChange}),Object(L.jsx)(pe.a,{autoFocus:!0,margin:"dense",id:"longitud_value",label:"Longitud",fullWidth:!0,variant:"standard",value:this.props.sensor.longitud_value,onChange:this.props.handleChange})]}),Object(L.jsxs)(Oe.a,{children:[Object(L.jsx)(be.a,{onClick:this.props.handleClose,children:"Cancelar"}),Object(L.jsx)(be.a,{onClick:this.props.handleSubmit,children:"Subscribirse"})]})]})}}]),a}(i.a.Component),ve=a(598),ye=a(634),Se=a(599),Ce=a(600),we=(a(513),a(74)),ke=a.n(we),De=a(297),Te=a(298),Re=ke.a.icon({iconUrl:De.a,shadowUrl:Te.a});ke.a.Marker.prototype.options.icon=Re;var Pe=[13.680218380437124,-89.23616217214374],_e=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){return Object(L.jsxs)(ve.a,{style:{height:"calc(100% - 78px)",width:"100%"},center:Pe,zoom:25,scrollWheelZoom:!1,children:[Object(L.jsx)(ye.a,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),this.props.list.map((function(e){return Object(L.jsx)(Se.a,{position:[e.latitud_value,e.longitud_value],children:Object(L.jsxs)(Ce.a,{children:[e.name,Object(L.jsx)("br",{})]})},e.id)}))]})}}]),a}(i.a.Component),ze=a(299),Ee=a.n(ze),Ne=void 0,Fe=["columns","rowHeight","headerHeight"],We=["dataKey"],Le="ReactVirtualizedDemo-flexContainer",Me="ReactVirtualizedDemo-tableRow",He="ReactVirtualizedDemo-tableRowHover",Je="ReactVirtualizedDemo-tableCell",Ie="ReactVirtualizedDemo-noClick",Ae=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).getRowClassName=function(t){var a=t.index,n=e.props.onRowClick;return Object(te.a)(Me,Le,Object(u.a)({},He,-1!==a&&null!=n))},e.cellRenderer=function(t){var a=t.cellData,n=t.columnIndex,i=e.props,s=i.columns,o=i.rowHeight,r=i.onRowClick;return Object(L.jsx)(q.a,{component:"div",className:Object(te.a)(Je,Le,Object(u.a)({},Ie,null==r)),variant:"body",style:{height:o},align:null!=n&&s[n].numeric?"right":"left",children:a})},e.headerRenderer=function(t){var a=t.label,n=t.columnIndex,i=e.props,s=i.headerHeight,o=i.columns;return Object(L.jsx)(q.a,{component:"div",className:Object(te.a)(Je,Le,Ie),variant:"head",style:{height:s},align:o[n].numeric?"right":"left",children:Object(L.jsx)("span",{children:a})})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.columns,n=t.rowHeight,i=t.headerHeight,s=Object(ee.a)(t,Fe);return Object(L.jsx)(ne.a,{children:function(t){var o=t.height,r=t.width;return Object(L.jsx)(ne.c,Object(j.a)(Object(j.a)({stickyHeader:!0,height:o,width:r,rowHeight:n,gridStyle:{direction:"inherit"},headerHeight:i},s),{},{rowClassName:e.getRowClassName,children:a.map((function(t,a){var n=t.dataKey,i=Object(ee.a)(t,We);return Object(L.jsx)(ne.b,Object(j.a)({headerRenderer:function(t){return e.headerRenderer(Object(j.a)(Object(j.a)({},t),{},{columnIndex:a}))},className:Le,cellRenderer:e.cellRenderer,dataKey:n},i),n)}))}))}})}}]),a}(n.PureComponent);Ae.defaultProps={headerHeight:48,rowHeight:48};var Ke=Object(b.a)(Ae)((function(e){var t,a=e.theme;return t={"& .ReactVirtualized__Table__headerRow":Object(j.a)(Object(j.a)({},"rtl"===a.direction&&{paddingLeft:"0 !important"}),"rtl"!==a.direction&&{paddingRight:void 0})},Object(u.a)(t,"& .".concat(Le),{display:"flex",alignItems:"center",boxSizing:"border-box"}),Object(u.a)(t,"& .".concat(Me),{cursor:"pointer"}),Object(u.a)(t,"& .".concat(He),{"&:hover":{backgroundColor:a.palette.grey[200]}}),Object(u.a)(t,"& .".concat(Je),{flex:1}),Object(u.a)(t,"& .".concat(Ie),{cursor:"initial"}),t})),Ge=Object(L.jsxs)(n.Fragment,{children:[Object(L.jsx)(w.a,{onClick:function(e){return Ne.handleEdit()},"aria-label":"editar",children:Object(L.jsx)(je.a,{})}),Object(L.jsx)(w.a,{"aria-label":"eliminar",children:Object(L.jsx)(he.a,{})})]});[].push({id:1,name:"sensor1",topic:"Solar Panel",actions:Ge});var Ue=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(r.a)(this,a),(i=t.call(this,e)).resizeWindow=function(){console.log("Resize me"),console.log(i.tablavirtual.current),i.state.mapopen||i.setState({columna:i.tablavirtual.current.offsetWidth/4})},i.tablavirtual=n.createRef(),i.state={},i.state.sensor=$,i.state.columna=200,i.state.dialogOpen=!1,i.state.listSensor=[],i.state.listSensors=[],i.state.mapopen=!1,i.handleChange=i.handleChange.bind(Object(h.a)(i)),i.handleDialogClose=i.handleDialogClose.bind(Object(h.a)(i)),i.handleDialogOpen=i.handleDialogOpen.bind(Object(h.a)(i)),i.handleSubmit=i.handleSubmit.bind(Object(h.a)(i)),i.getAllSensor=i.getAllSensor.bind(Object(h.a)(i)),i.handleMapOpen=i.handleMapOpen.bind(Object(h.a)(i)),i.handleMapClose=i.handleMapClose.bind(Object(h.a)(i)),i}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeWindow),console.log("unmount")}},{key:"handlePageSensors",value:function(e){this.props.handleSensorPage(e)}},{key:"handleEdit",value:function(e){var t=this;console.log(e),fetch("/sensors/id?id="+e,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var a=e.docs;a.meta=JSON.stringify(a.meta),t.setState({dialogOpen:!0,sensor:a}),console.log(e)})).catch((function(e){t.setState({sensor:$}),console.log(e)}))}},{key:"getAllSensor",value:function(){var e=this;fetch("/sensors",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){var a=[],i=[];t.docs.forEach((function(t){a.push({id:t.id,name:t.name,topic:t.topic,actions:Object(L.jsxs)(n.Fragment,{children:[Object(L.jsx)(w.a,{onClick:function(a){return e.handleEdit(t._id)},"aria-label":"editar",children:Object(L.jsx)(je.a,{})}),Object(L.jsx)(w.a,{onClick:function(a){return e.handlePageSensors(t._id)},"aria-label":"Data",children:Object(L.jsx)(Ee.a,{})}),Object(L.jsx)(w.a,{"aria-label":"eliminar",children:Object(L.jsx)(he.a,{})})]})}),null!=t.latitud_value&&null!=t.latitud_value&&i.push(t)})),e.setState({listSensor:a,listSensors:i})})).catch((function(t){e.setState({listSensor:[]}),console.log(t)}))}},{key:"handleChange",value:function(e){var t=JSON.parse(JSON.stringify(this.state.sensor));t[e.target.id]=e.target.value,this.setState({sensor:t})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=JSON.parse(JSON.stringify(this.state.sensor));if(null!=this.state.sensor._id){var n=a._id;delete a._id,a.meta=JSON.parse(a.meta);var i={model:a,id:n};fetch("/sensors",{method:"PUT",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){t.setState({dialogOpen:!1,sensor:$}),console.log(e)})).catch((function(e){t.setState({sensor:$}),console.log(e)}))}else{delete a._id,a.meta=JSON.parse(a.meta);var s={model:a};fetch("/sensors",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){t.setState({dialogOpen:!1,sensor:$}),console.log(e)})).catch((function(e){t.setState({sensor:$}),console.log(e)}))}}},{key:"handleDialogOpen",value:function(){this.setState({dialogOpen:!0})}},{key:"handleDialogClose",value:function(){this.setState({dialogOpen:!1,sensor:$})}},{key:"handleMapOpen",value:function(){this.setState({mapopen:!this.state.mapopen})}},{key:"handleMapClose",value:function(){this.setState({mapopen:!1}),this.setState({columna:this.tablavirtual.current.offsetWidth/4})}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resizeWindow),console.log(this.tablavirtual.current.offsetWidth),this.setState({columna:this.tablavirtual.current.offsetWidth/4}),this.getAllSensor()}},{key:"render",value:function(){var e=this;return Object(L.jsxs)("div",{style:{width:"100%",height:"calc(100% - 64px)"},children:[Object(L.jsx)(re.a,{title:"A\xf1adir Sensor",children:Object(L.jsxs)(oe.a,{onClick:this.handleDialogOpen,variant:"extended",style:{margin:"15px",backgroundColor:"white"},sx:{boxShadow:2},children:[Object(L.jsx)(le.a,{sx:{mr:1}}),"A\xf1adir"]})}),Object(L.jsx)(re.a,{title:"Mapa",children:Object(L.jsxs)(oe.a,{onClick:this.handleMapOpen,variant:"extended",style:{margin:"15px",backgroundColor:"white"},sx:{boxShadow:2},children:[Object(L.jsx)(se.a,{sx:{mr:1}}),"Mapa"]})}),this.state.mapopen?Object(L.jsx)(_e,{list:this.state.listSensors}):Object(L.jsx)(ae.a,{style:{height:"calc(100% - 78px)",width:"100%"},ref:this.tablavirtual,children:Object(L.jsx)(Ke,{rowCount:this.state.listSensor.length,rowGetter:function(t){var a=t.index;return e.state.listSensor[a]},columns:[{width:this.state.columna,label:"id",dataKey:"id",numeric:!1},{width:this.state.columna,label:"Nombre",dataKey:"name",numeric:!1},{width:this.state.columna,label:"T\xf3pico",dataKey:"topic",numeric:!1},{width:this.state.columna,label:"Acciones",dataKey:"actions",numeric:!1}]})}),Object(L.jsx)(fe,{sensor:this.state.sensor,handleChange:this.handleChange,open:this.state.dialogOpen,handleClose:this.handleDialogClose,handleSubmit:this.handleSubmit})]})}}]),a}(n.Component),Ve=a(631),qe=a(609),Be=a(601),Xe=a(156),Ze=a(149),Qe=a(603),Ye=a(302),$e=a(604),et={inputProps:{"aria-label":"Switch demo"}};function tt(e,t){for(var a=t.split(".");a.length&&(e=e[a.shift()]););return e}var at=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getData(n.props.id),n.state={metricas:[],booleans:[],booleanos:{},data:[],time1:new Date((new Date).getTime()-108e5),time2:new Date,realtime:!0},n.handleTime1=n.handleTime1.bind(Object(h.a)(n)),n.handleTime2=n.handleTime2.bind(Object(h.a)(n)),n.handleCheck=n.handleCheck.bind(Object(h.a)(n)),n.getData=n.getData.bind(Object(h.a)(n)),n.getDataSensor=n.getDataSensor.bind(Object(h.a)(n)),n.getDataSocket=n.getDataSocket.bind(Object(h.a)(n)),V.sc.on("message",(function(e){n.getDataSocket(e)})),n}return Object(c.a)(a,[{key:"getDataSocket",value:function(e){this.state.realtime&&(this.state.metricas.forEach((function(e){})),console.log(e))}},{key:"getDataSensor",value:function(e,t){var a=this;console.log(t);var n=window.location.protocol+"//"+window.location.host,i=new URL("data/bytime",n);console.log("field_id"),i.searchParams.set("time1",this.state.time1),i.searchParams.set("time2",this.state.time2),i.searchParams.set("field_id",t),i.searchParams.set("id",e),console.log(i.toString()),fetch(i.toString(),{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=[];a.state.metricas.forEach((function(e){t.push([])})),e.docs.forEach((function(e){var n=0;a.state.metricas.forEach((function(a){var i={};i.time=new Date(e.time),i.time=i.time.toLocaleString(),i[a.split(".").at(-1)]=parseFloat(tt(e.data,a)),t[n].push(i),n++}))}));var n=JSON.parse(JSON.stringify(a.state.booleanos));a.state.booleans.forEach((function(t){n[t.split(".").at(-1)]=1==tt(e.docs[0].data,t)})),console.log(n),a.setState({booleanos:n}),a.setState({data:t})})).catch((function(e){}))}},{key:"getData",value:function(e){var t=this;fetch("/sensors/id?id="+e,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e),t.props.setTitle("Sensors \u279c "+e.docs.name);var a=[],n=[],i={},s=0;e.docs.meta.forEach((function(e){"m"==e[1]&&a.push(e[0]),"b"==e[1]&&(i[e[0].split(".").at(-1)]={value:!1,key:s},n.push(e[0])),s++})),t.setState({metricas:a,booleans:n,booleanos:i}),console.log(t.state.booleanos),t.getDataSensor(e.docs.id,e.docs.id_field)})).catch((function(e){}))}},{key:"handleCheck",value:function(){this.setState({realtime:!this.state.realtime})}},{key:"handleTime1",value:function(e){this.setState({time1:e})}},{key:"handleTime2",value:function(e){this.setState({time2:e})}},{key:"render",value:function(){var e=this;return Object(L.jsxs)(i.a.Fragment,{children:[Object(L.jsxs)(x.a,{sx:{padding:"15px",display:"flex"},children:[Object(L.jsx)(Ye.a,{dateAdapter:Qe.a,children:Object(L.jsx)($e.a,{renderInput:function(e){return Object(L.jsx)(pe.a,Object(j.a)({sx:{marginRight:"15px"}},e))},label:"Desde",value:this.state.time1,onChange:this.handleTime1})}),Object(L.jsx)(Ye.a,{dateAdapter:Qe.a,children:Object(L.jsx)($e.a,{renderInput:function(e){return Object(L.jsx)(pe.a,Object(j.a)({sx:{marginRight:"15px"}},e))},label:"Hasta",value:this.state.time2,onChange:this.handleTime2})}),Object(L.jsx)(S.a,{sx:{fontSize:18},display:"flex",justifyContent:"center",flexDirection:"column",alignContent:"center",color:"text.secondary",gutterBottom:!0,children:Object(L.jsxs)("span",{children:["    RealTime ",Object(L.jsx)(qe.a,Object(j.a)(Object(j.a)({},et),{},{color:"primary",inputProps:{"aria-label":"controlled"},checked:this.state.realtime,onChange:this.handleCheck}))]})})]}),Object(L.jsx)(x.a,{sx:{padding:"10px",marginLeft:"20px"},children:Object.keys(this.state.booleanos).map((function(t){return Object(L.jsx)("div",{sx:{maxWidth:"125px",height:"75px",display:"flex",justifyContent:"center",flexDirection:"column"},children:Object(L.jsxs)(S.a,{sx:{fontSize:22},flexDirection:"column",alignContent:"center",color:"text.secondary",gutterBottom:!0,children:[t,"  ",Object(L.jsx)(qe.a,Object(j.a)(Object(j.a)({},et),{},{disabled:!0,color:"primary",checked:e.state.booleanos[t].value}))]})},e.state.booleanos[t].key)}))}),Object(L.jsx)(x.a,{sx:{padding:"10px"},children:this.state.data.map((function(t,a){return Object(L.jsx)(Ve.a,{sx:{width:"100%",heigth:"550px",paddingTop:"40px",marginTop:"10px"},children:Object(L.jsx)(H.a,{width:"100%",height:550,children:Object(L.jsxs)(J.a,{data:t,margin:{top:5,right:30,left:20,bottom:5},children:[Object(L.jsx)(Be.a,{strokeDasharray:"3 3"}),Object(L.jsx)(I.a,{dataKey:"time"}),Object(L.jsx)(A.a,{}),Object(L.jsx)(Xe.a,{}),Object(L.jsx)(Ze.a,{}),Object(L.jsx)(K.a,{type:"monotone",dataKey:e.state.metricas[a].split(".").at(-1),stroke:"#82ca9d"})]})})},a)}))})]})}}]),a}(i.a.Component),nt=at;var it=Object(b.a)(f.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(j.a)({zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},a&&{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})})})),st=Object(b.a)(m.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return{"& .MuiDrawer-paper":Object(j.a)({position:"relative",whiteSpace:"nowrap",width:240,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen}),boxSizing:"border-box"},!a&&Object(u.a)({overflowX:"hidden",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),width:t.spacing(7)},t.breakpoints.up("sm"),{width:t.spacing(9)}))}})),ot=Object(p.a)(),rt=(Object(b.a)("div")((function(e){return e.theme.mixins.toolbar})),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={open:!0,title:Z,page:Q,sensor:null},n.pageSensors=n.pageSensors.bind(Object(h.a)(n)),n.toggleDrawer=n.toggleDrawer.bind(Object(h.a)(n)),n.setPage=n.setPage.bind(Object(h.a)(n)),n.setTitle=n.setTitle.bind(Object(h.a)(n)),n.setSensors=n.setSensors.bind(Object(h.a)(n)),n}return Object(c.a)(a,[{key:"pageSensors",value:function(e){this.setPage(Y),this.setState({sensor:e})}},{key:"toggleDrawer",value:function(){this.setState({open:!this.state.open})}},{key:"setTitle",value:function(e){this.setState({title:e})}},{key:"setSensors",value:function(){this.setTitle(Z),this.setPage(Q)}},{key:"setPage",value:function(e){this.setState({page:e})}},{key:"renderPage",value:function(e){return e==Q?Object(L.jsx)(Ue,{handleSensorPage:this.pageSensors,open:this.state.open}):e==Y?Object(L.jsx)(nt,{setTitle:this.setTitle,id:this.state.sensor}):void 0}},{key:"render",value:function(){return Object(L.jsx)(g.a,{theme:ot,children:Object(L.jsxs)(x.a,{sx:{display:"flex"},children:[Object(L.jsx)(O.a,{}),Object(L.jsx)(it,{position:"absolute",open:this.state.open,children:Object(L.jsxs)(v.a,{sx:{pr:"24px"},children:[Object(L.jsx)(w.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:this.toggleDrawer,sx:Object(j.a)({marginRight:"36px"},this.state.open&&{display:"none"}),children:Object(L.jsx)(D.a,{})}),Object(L.jsx)(S.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,sx:{flexGrow:1},children:this.state.title})]})}),Object(L.jsxs)(st,{variant:"permanent",open:this.state.open,children:[Object(L.jsx)(v.a,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",px:[1]},children:Object(L.jsx)(w.a,{onClick:this.toggleDrawer,children:Object(L.jsx)(R.a,{})})}),Object(L.jsx)(C.a,{}),Object(L.jsxs)(y.a,{component:"nav",children:[Object(L.jsx)(n.Fragment,{children:Object(L.jsxs)(P.a,{onClick:this.setSensors,children:[Object(L.jsx)(_.a,{children:Object(L.jsx)(X.a,{})}),Object(L.jsx)(z.a,{primary:"Sensores"})]})}),Object(L.jsx)(C.a,{sx:{my:1}}),Object(L.jsx)(M,{})]})]}),Object(L.jsxs)(x.a,{component:"main",sx:{backgroundColor:function(e){return"light"===e.palette.mode?e.palette.primary[100]:e.palette.grey[900]},flexGrow:1,height:"100vh",width:"100vw",overflow:"auto"},children:[Object(L.jsx)("div",{style:{height:"64px"}}),this.renderPage(this.state.page)]})]})})}}]),a}(n.Component)),ct=new(a(307).a),lt=a(309),dt=a(24),ht=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={ready:!1},n}return Object(c.a)(a,[{key:"handleEvent",value:function(e,t){console.log("on key cloak event",e,t),e&&"onReady"===e&&ct.hasRealmRole("administratorLora")&&this.setState({ready:!0})}},{key:"render",value:function(){return Object(L.jsx)(W.a,{authClient:ct,onEvent:this.handleEvent.bind(this),onTokens:function(e){var t=e.token;console.log("yeah token"),console.log(t)},initOptions:{onLoad:"login-required"},children:this.state.ready?Object(L.jsx)(lt.a,{children:Object(L.jsx)(dt.c,{children:Object(L.jsx)(dt.a,{path:"/",element:Object(L.jsx)(rt,{})})})}):Object(L.jsxs)("div",{children:[Object(L.jsx)("div",{children:"Access denied"}),Object(L.jsx)("button",{type:"button",className:"text-blue-800",onClick:function(){return ct.logout()},children:"Logout"})]})})}}]),a}(i.a.Component),ut=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,636)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,s=t.getLCP,o=t.getTTFB;a(e),n(e),i(e),s(e),o(e)}))};V.init(),o.a.createRoot(document.getElementById("root")).render(Object(L.jsx)(ht,{})),ut()}},[[515,1,2]]]);
//# sourceMappingURL=main.783f96e7.chunk.js.map